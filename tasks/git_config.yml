---
- name: Ensure .gitconfig exists
  ansible.builtin.file:
    path: "~{{ git_user_id }}/.gitconfig"
    state: touch
    owner: "{{ git_user_id }}"
    group: "{{ git_user_group_id }}"
    mode: "u=rw,g=r,o=r"

- name: "Manage git config entries"
  community.general.git_config:
    name: "{{ item.key }}"
    scope: "{{ git_config_scope }}"
    file: "{{ git_config_path }}"
    value: "{{ item.value }}"
  with_dict: "{{ git_config_items }}"
